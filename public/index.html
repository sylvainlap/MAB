<!doctype html>
<html ng-app="mabapp">
	<head>
		<meta charset="utf-8">
		<title>Monitoring AB v0.1.0</title>

		<link rel="stylesheet" type="text/css" href="./css/custom.css" />
	</head>
	<body ng-controller="MainCtrl">
		<div class="container">
			<div class="header">
				
<!-- === LANGUAGE SWITCH === -->
				<div class="menu menu-lang selectadv pull-left">
					<select class="switch-lang borderless" ng-model="l">
						<option value="{{ language }}" ng-selected="language==l" ng-repeat="language in lang.list">{{ language }}</option>
					</select>
				</div>				
<!-- === USER MENU === -->
				<div class="menu menu-user pull-right text-left" ng-if="user.token!=undefined">
		<!-- == Username -->
					<span class="glyphicon glyphicon-user"></span>
					{{ user.username }}
		<!-- == BTN Profile -->
					<a class="btn btn-default btn-sm" ng-click="userMgt.getProfile('open')">
						<span class="glyphicon glyphicon-cog"></span>
						{{ lang['front_profile'][l] }}
					</a>
		<!-- == BTN Logout -->
					<a class="btn btn-default btn-sm" ng-click="userMgt.logout()">
						<span class="glyphicon glyphicon-off"></span>
						{{ lang['front_disconnect'][l] }}
					</a>
				</div>
<!-- === TITLE === -->
				<div class="title">
					<span class="glyphicon glyphicon-stats"></span> MAB
				</div>
			</div>
				
				
<!-- === TRACE BOX === -->
			<div class="pane">
				<alert ng-repeat="msg in messages" type="{{ msg.type }}" close="alertMgt.closeAlert($index)">
					{{ lang[msg.msg][l] }}
				</alert>
			</div>

<!-- === REGISTER PANE === -->
			<div class="pane pane-register" ng-if="user.token==undefined">
				<div class="well">
					<h3>{{ lang['front_register'][l] }}</h3>
					<form class="form-inline" role="form">
		<!-- == INP Username -->
						<div class="input-group">
							<div class="input-group-addon"><span class="glyphicon glyphicon-user"></span></div>
							<input class="form-control" type="text" name="username" placeholder="{{ lang['front_username'][l] }}" ng-model="data.username" />
						</div>
		<!-- == INP Password -->
						<div class="input-group">
							<div class="input-group-addon"><span class="glyphicon glyphicon-lock"></span></div>
							<input class="form-control" type="password" name="password" placeholder="{{ lang['front_password'][l] }}" ng-model="data.password" />
						</div>
		<!-- == BTN Login -->
						<button class="btn btn-success" ng-click="userMgt.login()">
							<span class="glyphicon glyphicon-log-in"></span>
							{{ lang['front_login'][l] }}
						</button>
		<!-- == BTN Register -->
						<button class="btn btn-warning" ng-click="userMgt.register()">
							<span class="glyphicon glyphicon-pencil"></span>
							{{ lang['front_register'][l] }}
						</button>
					</form>
				</div>
			</div>
				
				
<!-- === EDIT PROFILE PANE === -->
			<div class="pane pane-profile" ng-if="user.token != undefined && ui.showProfile">
				<div class="well">
					<h3>{{ lang['front_profile_manager'][l] }}</h3>
					<form>
					<legend>{{ lang['front_user_info'][l] }}</legend>
		<!-- == INP Usernamer -->
						<div class="form-group row">
							<label class="col-xs-4">{{ lang['front_username'][l] }}</label>
							<input class="col-xs-8"  type="text" name="username"placeholder="{{ lang['front_username'][l] }}" ng-model="data.username"/>
						</div>
		<!-- == INP Password -->
						<div class="form-group row">
							<label class="col-xs-4">{{ lang['front_password'][l] }}</label>
							<a class="label-like" href="#">{{ lang['front_change'][l] + ' ' + lang['front_password'][l] }}</a>
						</div>
		<!-- == INP Structure -->
						<div class="form-group row">
							<label class="col-xs-4">{{ lang['front_structure'][l] }}</label>
							<input class="col-xs-8" type="text" name="structure" placeholder="{{ lang['front_structure'][l] }}" ng-model="data.structure"/>
						</div>
		<!-- == INP Localisation -->
						<div class="form-group row">
							<label class="col-xs-4">{{ lang['front_localisation'][l] }}</label>
							<input class="col-xs-8" type="text" name="localisation" placeholder="{{ lang['front_localisation'][l] }}" ng-model="data.geoloc" />
						</div>
		<!-- == GRP School -->
						<div class="form-group row">
							<label class="col-xs-4">{{ lang['front_school'][l] }}</label>
				<!-- == INP City -->
							<input class="col-xs-6" type="text" name="city" placeholder="{{ lang['front_city'][l] }}" ng-model="data.school.city" />
				<!-- == INP Promo -->
							<div class="selectadv col-xs-2">
								<select class="col-xs-2" name="promo" ng-model="data.school.promo">
									<option value="{{ y }}" ng-selected="y==data.school.promo" ng-repeat="y in years">{{ y }}</option>
								</select>
							</div>
						</div>
		<!-- == INP Language -->
						<div class="form-group row">
							<label class="col-xs-4">{{ lang['front_language'][l] }}</label>
							<div class="selectadv col-xs-2">
								<select ng-model="data.lang">
									<option value="{{ language }}" ng-selected="language==data.lang" ng-repeat="language in lang.list">{{ language }}</option>
								</select>
							</div>
						</div>
		<!-- == INP Activity -->
						<legend>{{ lang['front_activity'][l] }}</legend>
				<!-- == DISP Activities List -->
						<table class="table bg-success">
							<tr ng-repeat="a in data.activity">
								<td>
									{{ lang[a.name][l] }}
								</td>
								<td class="text-right">
									 {{ a.ratio + '%' }}
								</td>
						<!-- == BTN Activity Remove -->
								<td class="text-right">
									<button class="btn btn-xs btn-warning" type="button" ng-click="dataMgt.removeActivity($index)">
										<span class="glyphicon glyphicon-minus"></span>
									</button>
								</td>
							</tr>
						</table>
				<!-- == INP Activity -->
						<div class="row form-group">
							<label class="col-xs-4">
								{{ lang['front_add'][l] + ' ' + lang['front_activity'][l] }}
							</label>
							<div class="selectadv col-xs-4">
								<select name="activity" ng-model="tmp.activity.name">
									<option value="{{ species }}" ng-repeat="(species, types) in animals">{{ lang[species][l] }}</option>
								</select>
							</div>
				<!-- == INP Activity ratio -->
							<input class="col-xs-2" type="number" name="ratio" ng-model="tmp.activity.ratio" />
							<label class="col-xs-1">%</label>
				<!-- == BTN Activity Add -->
							<button class="col-xs-1 col-xs-offset-0 btn btn-info" type="button" ng-click="dataMgt.addActivity()">
								<span class="glyphicon glyphicon-plus"></span>
							</button>
						</div>
		<!-- == INP Volume -->
						<legend>{{ lang['front_volume'][l] }}</legend>
				<!-- == DISP volume List -->
						<table class="table bg-success">
							<tr ng-repeat="v in data.volume">
								<td>
									{{ lang[v.species][l] }} {{ lang[v.type][l] }} {{ lang[v.age][l] }}
								</td>
								<td class="text-right">
									{{ v.volume }}
								</td>
						<!-- == BTN Activity Remove -->
								<td class="text-right">
									<button class="btn btn-xs btn-warning" type="button" ng-click="dataMgt.removeVolume($index)">
										<span class="glyphicon glyphicon-minus"></span>
									</button>
								</td>
							</tr>
						</table>
				<!-- == INP volume -->
						<div class="row form-group">
							<label class="col-xs-4">
								{{ lang['front_add'][l] + ' ' + lang['front_volume'][l] }}
							</label>
							<div class="selectadv col-xs-4">
								<select name="animal" ng-model="tmp.volume.raw">
									<optgroup label="{{ lang[species][l] }}" ng-repeat="(species, types) in animals">
										<option disabled class="optssgroup" ng-repeat-start="(type, ages) in types">
											-- {{ lang[type][l] }} --
										</option>
										<option value="{{ species + '|'  + type + '|' + age + '|' + weight }}" ng-repeat="(age, weight) in ages">
											{{ lang[species][l] + '/'  + lang[type][l] + '/' + lang[age][l] }}
										</option>
										<option disabled ng-repeat-end></option>
									</optgroup>
								</select>
							</div>
				<!-- == INP volume value -->
							<input class="col-xs-2" type="number" name="quantity" ng-model="tmp.volume.value" />
				<!-- == BTN volume Add -->
							<button class="col-xs-1 col-xs-offset-1 btn btn-info" type="button" ng-click="dataMgt.addVolume()">
								<span class="glyphicon glyphicon-plus"></span>
							</button>
						</div>
		<!-- == BTN Update -->
						<div class="validation row form-group">
							<button class="col-xs-offset-2 col-xs-4 btn-lg btn btn-success" ng-click="userMgt.updateProfile()">
								<span class="glyphicon glyphicon-floppy-save"></span> 
								{{ lang['front_save_changes'][l] }}
							</button>
		<!-- == BTN Cancel -->
							<button class="col-xs-4 btn-lg btn btn-danger" ng-click="userMgt.getProfile('close')">
								<span class="glyphicon glyphicon-remove"></span> 
								{{ lang['front_cancel'][l] }}
							</button>
						</div>
					</form>
				</div>
			</div>
				
				
<!-- === TREATMENT FORM PANE === -->
			<div class="pane navigation" ng-if="user.token != undefined && !ui.showProfile">
				<a ng-click="ui.page = 'inclusion'" ng-class="{'active':ui.page=='inclusion'}">inclusion</a>
				<a ng-click="ui.page = 'display'" ng-class="{'active':ui.page=='display'}">display</a>
			</div>
			<div class="pane main-pane" ng-if="user.token != undefined && !ui.showProfile">
				<div class="inclusion-pane well" ng-if="ui.page == 'inclusion'" ng-init="reset.data()">
					<h3>{{ lang['front_main_form_title'][l] }}</h3>
					<form ng-submit="dataMgt.recordTreatment()">

		<!-- == GRP Treatment infos -->
						<legend>{{ lang['front_treatment'][l] }}</legend>
				<!-- == INP Date -->
						<div class="row form-group">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!data.date_dispense, 'glyphicon-ok-sign text-success':data.date_dispense}"></span>
								{{ lang['front_start_date'][l] }}
							</label>
							<p class="input-group col-xs-8">
				            	<input class="col-xs-10" type="text"
				            	datepicker-popup="{{format}}"
				            	is-open="datePicker.opened"
				            	datepicker-options="dateOptions"
				            	close-text="{{ lang['front_close'][l] }}"
				            	current-text="{{ lang['front_today'][l] }}"
				            	clear-text="{{ lang['front_clear'][l] }}"
				            	max-date="thisday"
				            	ng-model="data.date_dispense"
				            	/>
			            		<button type="button" class="col-xs-2 btn btn-default" ng-click="open($event)">
			            			<i class="glyphicon glyphicon-calendar"></i>
			            		</button>
				            </p>
			            </div>
				<!-- == INP Pathology -->
			            <div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!data.pathology, 'glyphicon-ok-sign text-success':data.pathology}"></span>
								{{ lang['front_pathology'][l] }}
							</label>
							<div class="selectadv col-xs-8">
								<select name="pathology" ng-model="data.pathology">
									<option value="{{ patho }}" ng-repeat="patho in enums['tra_pathology']">
										{{ lang[patho][l] }}
									</option>
								</select>
							</div>
						</div>
				<!-- == INP Treatment Type -->
						<div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!data.treat_type, 'glyphicon-ok-sign text-success':data.treat_type}"></span>
								{{ lang['front_treat_type'][l] }}
							</label>
							<div class="selectadv col-xs-8">
								<select name="treatment_type" ng-model="data.treat_type">
									<option value="{{ type }}" ng-repeat="type in enums['tra_type']">
										{{ lang[type][l] }}
									</option>
								</select>
							</div>
						</div>
				<!-- == INP Treatment Init -->
						<div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!data.treat_init, 'glyphicon-ok-sign text-success':data.treat_init}"></span>
								{{ lang['front_treat_init'][l] }}
							</label>
							<div class="selectadv col-xs-8">
								<select name="treatment_init" ng-model="data.treat_init">
									<option value="{{ init }}" ng-repeat="init in enums['tra_init']">
										{{ lang[init][l] }}
									</option>
								</select>
							</div>
						</div>
				<!-- == INP Treatment Follow Sample -->
						<div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon glyphicon-ok-sign text-success"></span>
								{{ lang['front_follow_sample'][l] }}
							</label>
							<input type="checkbox" id="follow_sample" ng-model="data.follow_sample"/>
							<label class="col-xs-8" for="follow_sample">
								<span>{{ data.follow_sample?lang['front_yes'][l]:lang['front_no'][l] }}</span>
							</label>
						</div>
				<!-- == INP Duration -->
						<div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!data.duration, 'glyphicon-ok-sign text-success':data.duration}"></span>
								{{ lang['front_treat_duration'][l] }}
							</label>
							<input class="col-xs-8" type="number" name="duration" ng-model="data.duration" />
						</div>
				<!-- == INP Frequency -->
						<div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!data.frequency||data.frequency>3, 'glyphicon-ok-sign text-success':data.frequency}"></span>
								{{ lang['front_treat_frequency'][l] }}
							</label>
							<!-- input class="col-xs-8" type="number" step="any" name="frequency" ng-model="data.frequency" /-->
							<div class="selectadv col-xs-8">
								<select name="frequency" ng-model="data.frequency">
									<option value="{{ v }}" 
										ng-repeat="(f, v) in enums['tra_frequency']">
										{{ lang[f][l] }}
									</option>
								</select>
							</div>
						</div>
				<!-- == SEL Client Type -->
						<div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!data.client_type, 'glyphicon-ok-sign text-success':data.client_type}"></span>
								{{ lang['front_client_type'][l] }}
							</label>
							<div class="selectadv col-xs-8">
								<select name="client_type" ng-model="data.client_type">
									<option value="{{ client }}" 
										ng-repeat="client in enums['ani_client_types']">
										{{ lang[client][l] }}
									</option>
								</select>
							</div>
						</div>
						
		<!-- == GRP Treatment Animals List Creation -->
						<legend>{{ lang['front_animals'][l] }}</legend>
				<!-- == DISP Animals List -->
						<table class="table bg-success">
							<tr ng-if="!data.animals || data.animals.length==0">
								<td class="bg-warning text-danger">{{ lang['front_empty_list'][l] }}</td>
							</tr>
							<tr ng-if="!data.animals || data.animals.length==0">
								<th class="bg-danger text-danger">
									<span class="glyphicon glyphicon-warning-sign"></span>&nbsp;
									{{ lang['front_msg_add_at_list_1_animal'][l] }}
								</th>
							</tr>
							<tr ng-repeat="a in data.animals">
								<td>
									<p><span class="glyphicon glyphicon-ok text-success"></span>&nbsp;{{ a.quantity }} {{ lang[a.species][l] }} {{ lang[a.type][l] }} {{ lang[a.age][l] }} [<span ng-repeat="env in a.environment">{{ lang[env][l] + ' '}}</span>]</p>
								</td>
						<!-- == BTN Animal Remove -->
								<td class="text-right">
									<button class="btn btn-xs btn-warning" type="button" ng-click="dataMgt.removeAnimal($index)">
										<span class="glyphicon glyphicon-minus"></span>
									</button>
								</td>
							</tr>
						</table>
				<!-- == INP Animal -->
						<div class="row form-group">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!tmp.animal.raw, 'glyphicon-ok-sign text-success':tmp.animal.raw}"></span>
								{{ lang['front_species'][l] }}
							</label>
							<div class="selectadv col-xs-8">
								<select name="animal" ng-model="tmp.animal.raw">
									<optgroup label="{{ lang[species][l] }}" ng-repeat="(species, types) in animals">
										<option disabled class="optssgroup" ng-repeat-start="(type, ages) in types">
											-- {{ lang[type][l] }} --
										</option>
										<option value="{{ species + '|'  + type + '|' + age + '|' + weight }}" ng-repeat="(age, weight) in ages">
											{{ lang[species][l] + '/'  + lang[type][l] + '/' + lang[age][l] }}
										</option>
										<option disabled ng-repeat-end></option>
									</optgroup>
								</select>
							</div>
						</div>
				<!-- == INP Animal quantity -->
						<div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!tmp.animal.quantity, 'glyphicon-ok-sign text-success':tmp.animal.quantity}"></span>
								{{ lang['front_animal_quantity'][l] }}
							</label>
							<input class="col-xs-8" type="number" name="quantity" ng-model="tmp.animal.quantity" />
						</div>
				<!-- == SEL Animal Environment -->
						<div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!tmp.animal.envControl, 'glyphicon-ok-sign text-success':tmp.animal.envControl}"></span>
								{{ lang['front_animal_environment'][l] }}
							</label>
							<div class="col-xs-8 pad0">
								<input type="checkbox" name="animal_env" ng-repeat-start="env in enums['ani_environment']" ng-model="tmp.animal.environment[env]" ng-change="dataMgt.buildEnvControl()" id="{{ env }}">
								<label class="col-xs-6" for="{{ env }}" class="tiny">
									<span>{{ lang[env][l] }}</span>
								</label>
								<span ng-repeat-end></span>
							</div>
						</div>
				<!-- == BTN Animal Add -->
						<div class="form-group row">
							<button class="col-xs-4 col-xs-offset-8 btn btn-info" type="button" ng-click="dataMgt.addAnimal()" ng-disabled="!tmp.animal.quantity||!tmp.animal.envControl||!tmp.animal.raw">
								<span class="glyphicon glyphicon-plus"></span> {{ lang['front_add'][l]}}
							</button>
						</div>
							
		<!-- == GRP Treatment Products List Creation -->
						<legend>{{ lang['front_treat_prescription'][l] }}</legend>
				<!-- == DISP Products List -->
						<table class="table bg-success">
							<tr ng-if="!data.prescription || data.prescription.length==0">
								<td class="bg-warning text-danger">{{ lang['front_empty_list'][l] }}</td>
							</tr>
							<tr ng-if="!data.prescription || data.prescription.length==0">
								<th class="bg-danger text-danger">
									<span class="glyphicon glyphicon-warning-sign"></span>&nbsp;
									{{ lang['front_msg_add_at_list_1_product'][l] }}
								</th>
							</tr>
							<tr ng-repeat="p in data.prescription">
								<td>
									<span class="glyphicon glyphicon-ok text-success"></span>&nbsp;
									{{ 	p.name }}
								</td>
								<td class="text-right">
									{{ p.quantity_init }}
								</td>
								<td class="text-right">
									{{ lang['front_then'][l] }}
								</td>
								<td class="text-right">
									{{ p.quantity }}
								</td>
								<td>
									{{ ((p.nunit!='vrac' && p.nunit!=undefined)?lang[p.nunit][l] + ' ' + lang['front_of'][l]+ ' '+ p.qunit + p.unit:p.unit) }}
								</td>
							<!-- == BTN Product Remove -->
								<td class="text-right">
									<button class="btn btn-xs btn-warning" type="button" ng-click="dataMgt.removeProduct($index)">
										<span class="glyphicon glyphicon-minus"></span>
									</button>
								</td>
							</tr>
						</table>
						<div class="row form-group">
				<!-- == SEL Product -->
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!tmp.productName, 'glyphicon-ok-sign text-success':tmp.productName}"></span>
								{{ lang['front_product'][l] }}
							</label>
							<div class="selectadv col-xs-8">
								<select name="product" ng-model="tmp.productName" ng_change="dataMgt.buildProduct()">
									<optgroup label="{{ lang['front_products_match_animal'][l] }}">
										<option value="{{ p.name }}" ng-repeat="p in products | filter : filterMgt.products.target | orderBy:'name'">
											{{ p.name }}
										</option>
									</optgroup>
									<optgroup label="{{ lang['front_all_products'][l] }}">
										<option value="{{ p.name }}" ng-repeat="p in products | orderBy:'name'">
											{{ p.name }}
										</option>
									</optgroup>
								</select>
							</div>
						</div>
				<!-- == INP Product Initial Quantity -->
						<div class="form-group row">
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!tmp.product.quantity_init, 'glyphicon-ok-sign text-success':tmp.product.quantity_init}"></span>
								{{ lang['front_product_quantity_init'][l] }}
							</label>
							<input  class="col-xs-3" type="number" name="product_quantity_init" ng-model="tmp.product.quantity_init" />
						<!-- == DISP Product Unit -->
							<label class="col-xs-5">
								{{ lang['front_in'][l]+ ' '+((tmp.product.nunit!='vrac' && tmp.product.nunit!=undefined)?lang[tmp.product.nunit][l] +' ' + lang['front_of'][l]+ ' '+ tmp.product.qunit + tmp.product.unit:tmp.product.unit) }}
							</label>
				<!-- == INP Product Quantity -->
							<label class="col-xs-4">
								<span class="glyphicon " ng-class="{'glyphicon-question-sign text-danger':!tmp.product.quantity, 'glyphicon-ok-sign text-success':tmp.product.quantity}"></span>
								{{ lang['front_product_quantity'][l] }}
							</label>
							<input  class="col-xs-3" type="number" name="product_quantity" ng-model="tmp.product.quantity" />
						<!-- == DISP Product Unit -->
							<label class="col-xs-5">
								{{ lang['front_in'][l]+ ' '+((tmp.product.nunit!='vrac' && tmp.product.nunit!=undefined)?lang[tmp.product.nunit][l] +' ' + lang['front_of'][l]+ ' '+ tmp.product.qunit + tmp.product.unit:tmp.product.unit) }}
							</label>
						</div>
				<!-- == BTN Product Add -->
						<div class="form-group row">
							<button class="col-xs-4 col-xs-offset-8 btn btn-info btn-md" type="button" ng-click="dataMgt.addProduct()" ng-disabled="!tmp.product.quantity_init||!tmp.product.quantity||!tmp.productName">
								<span class="glyphicon glyphicon-plus"></span> {{ lang['front_add'][l]}}
							</button>
						</div>

		<!-- == BTN Record -->
						<div class="validation row form-group">
							<button type="submit" class="col-xs-4 col-xs-offset-4 btn btn-lg btn-success" ng-disabled="!data.date_dispense || !data.pathology || !data.treat_type || !data.treat_init || !data.duration || (!data.frequency||data.frequency>3) || !data.client_type || (!data.animals || data.animals.length==0) || (!data.prescription || data.prescription.length==0)">
								<span class="glyphicon glyphicon-floppy-save"></span>
								{{ lang['front_record'][l] }}
							</button>
						</div>
					</form>
				</div>
	<!-- == DISPLAY PANE == -->
				<div class="display-pane well" ng-if="ui.page == 'display'" ng-init="dataMgt.getTreatments()">
					<h3>Display</h3>
					<table class='table table-bordered'>
						<!-- TODO TRANSLATE -->
						<tr>
							<th>date</th>
							<th>{{ lang['front_pathology'][l] }}</th>
							<th>traitement</th>
							<th>{{ lang['front_animals'][l] }}</th>
							<th>{{ lang['front_treat_prescription'][l] }}</th>
						</tr>
						<tr ng-repeat="t in data">
							<td>{{ t.date_dispense.slice(0,t.date_dispense.indexOf('T')) }}</td>
							<td>{{ lang[t.pathology][l] }}</td>
							<td>
								<table class="table">
									<tr>
										<th>type</th><td>{{ lang[t.treat_type][l] }}</td>
									</tr>
									<tr>
										<th>initial</th><td>{{ lang[t.treat_init][l] }}</td>
									</tr>
									<tr>
										<th>suit pvt</th><td>{{ t.follow_sample?lang['front_yes'][l]:lang['front_no'][l] }}</td>
									</tr>
									<tr>
										<th>dur/frq</th><td>{{ t.duration }} / {{ t.frequency }}</td>
									</tr>
									<tr>
										<th>client</th><td>{{ lang[t.client_type][l] }}</td>
									</tr>
								</table>
							<td>
								<table class="table">
									<tr ng-repeat="a in t.animals">
										<td>{{ lang[a.species][l] }} {{ lang[a.type][l] }} {{ lang[a.age][l] }}</td>
										<td>{{ a.quantity }}</td>
									</tr>
								</table>
							</td>
							<td>
								<table class="table">
									<tr ng-repeat="p in t.prescription">
										<td>{{ p.name }}</td>
										<td>{{ p.quantity_init+' / '+p.quantity }} {{ ((p.nunit!='vrac' && p.nunit!=undefined)?lang[p.nunit][l] +' de '+ p.qunit + p.unit:p.unit) }}</td>
									</tr>
								</table></td>
						</tr>
					</table>
				</div>
			</div>
<!-- === DEBUG PANE === -->
			<div class="pane pane-debug" ng-if="true">
				<a ng-click="debug=!debug">DEBUG</a>
				<textarea class="col-md-12 col-xs-12" ng-if="debug">DATA : {{ '\n'+ print.data }}</textarea>
				<textarea class="col-md-12 col-xs-12" ng-if="debug">TMP : {{ '\n'+ print.tmp }}</textarea>
				<textarea class="col-md-12 col-xs-12" ng-if="debug">USER : {{ '\n'+ opened }}</textarea>
			</div>
		</div>
		
		
		<script src="./js/libraries/angular.min.js"></script>
		<script src="./js/libraries/ui-bootstrap-tpls.min.js"></script>
		<script src="./js/libraries/angular-local-storage.min.js"></script>
		<script src ="./js/libraries/queryJson.js"></script>

		<script src="./js/configuration/lang.data.js"></script>
		<script src="./js/configuration/enums.data.js"></script>
		<script src="./js/configuration/animals.data.js"></script>
		<script src="./js/configuration/products.data.js"></script>
		
		<script src="./js/app.front.js"></script>
		<script src="./js/controllers/MainCtrl.js"></script>
		<script src="./js/services/messageService.js"></script>
	</body>
</html>